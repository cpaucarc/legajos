{% extends 'base.html' %}
{% load static %}
{% load form_tags %}
{% block css %}
<link rel="stylesheet" href="{% static 'vendor/jquery/css/jquery-ui.min.css' %}">
{% endblock %}
{% block container %}
<div class="col-12">
  <div class="panel panel-primary">
    <div class="panel-heading">
      <h5>Registrar Persona
        <label class="pull-right">
          User: <label class="text-success">{{username}} {{tipo_persona_desc}}</label>
        </label>
      </h5>
    </div>
    <div class="panel-body">
      <div class="row">
        <div class="col-lg-12">
          {% if form.errors %}
          {% for error in form.non_field_errors %}
          <div class="alert alert-danger">
            <strong>{{ error|escape }}</strong>
          </div>
          {% endfor %}
          {% endif %}
        </div>
      </div>
      <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="col-lg-12">
          <div class="row">
            <div class="col-lg-8"></div>
            <div class="col-lg-4" align="right">
              <a href="/crear-persona" class="btn btn-danger btn-sm">Cancelar</a>
              &nbsp;
              <button type="submit" class="btn btn-primary btn-sm" id="btn-guardar">Guardar</button>
            </div>
          </div>
        </div>
        <fieldset class="border p-2">
          <legend class="scheduler-border" style="width: 110px!important; font-size:12px;"> Datos de la Persona</legend>
          <div class="col-lg-2">
            <label style="font-size:11px;">Fotografía (formato png, jpeg, o jpg<=100Kb)</label>
            {% if object.ruta_foto %}
            <img src="{{MEDIA_URL}}{{object.ruta_foto}}" class="img-fluid border shadow-sm" alt="personal"
                 style="margin-left: auto; margin-right: auto; width: 100%; display: block;"/>
            {% else %}
              <img src="{% static 'img/indice.png' %}" class="img-fluid border shadow-sm" alt="personal"
                   style="margin-left: auto; margin-right: auto; width: 100%; display: block;"/>
            {% endif %}
            {% field form.ruta_foto cols=False label=False label_width=0 %}
          </div>
          <div class="col-md-10">
            <div class="col-md-12">
              <div class="col-md-4">
                {% field form.tipo_documento cols=True label=True %}
              </div>
              <div class="col-md-4">
                {% field form.numero_documento cols=True label=True %}
              </div>
              <div class="col-md-4">
                {% field form.tipo_persona cols=True label=True label_width=3 %}
              </div>
            </div>
            <div class="col-md-12">
              <div class="col-md-4">
                {% field form.apellido_paterno cols=True label=True %}
              </div>
              <div class="col-md-4">
                {% field form.apellido_materno cols=True label=True %}
              </div>
              <div class="col-md-4">
                {% field form.nombres cols=True label=True label_width=3 %}
              </div>
            </div>
            <div class="col-md-12">
              <div class="col-md-4">
                {% field form.sexo cols=True label=True %}
              </div>
              <div class="col-md-4">
                {% field form.celular cols=True label=True %}
              </div>
              <div class="col-md-4">
                {% field form.correo_personal cols=True label=True label_width=3 %}
              </div>
            </div>
            <div class="col-md-12" id="div_resumen">
              <div class="col-md-12">
                {% field form.resumen cols=True label=True label_width=1 %}
              </div>
            </div>
            <div class="col-md-12 f-ext">
              <div class="col-md-6">
                {% field form.facultad cols=True label=True label_width=2 %}
              </div>
              <div class="col-md-6">
                {% field form.departamento cols=True label=True label_width=2 %}
              </div>
            </div>
          </div>
        </fieldset>
        <fieldset class="border p-2" id="dgenerales">
          <legend class="scheduler-border" style="width: 95px!important; font-size:12px;"> Datos Generales</legend>
          <div class="col-lg-12">
            <div class="col-md-4">
              {% field form_datos_generales.fecha_nacimiento cols=True label=True %}
            </div>
            <div class="col-md-4">
              {% field form_datos_generales.nacionalidad cols=True label=True %}
            </div>
            <div class="col-md-4">
              {% field form_datos_generales.tipo_contrato cols=True label=True label_width=3 %}
            </div>
          </div>
          <div class="col-lg-12">
            <div class="col-lg-4">
              {% field form_datos_generales.categoria cols=True label=True %}
            </div>
            <div class="col-md-4">
              {% field form_datos_generales.dedicacion cols=True label=True %}
            </div>
            <div class="col-md-4">
              {% field form_datos_generales.correo_institucional cols=True label=True label_width=3 %}
            </div>
          </div>
          <div class="col-lg-12">
            <div class="col-lg-4">
              {% field form_datos_generales.ubigeo_departamento cols=True label=True %}
            </div>
            <div class="col-md-4">
              {% field form_datos_generales.ubigeo_provincia cols=True label=True %}
            </div>
            <div class="col-md-4">
              {% field form_datos_generales.ubigeo_distrito cols=True label=True label_width=3 %}
            </div>
          </div>
        </fieldset>
        <fieldset class="border p-5" id="dcolegiatura">
            <legend class="scheduler-border" style="width: 120px!important; font-size:12px;"> Datos de Colegiatura</legend>
            <div class="row center-block">
                 <div class="col-lg-12">
                     {% field form_datos_colegiatura.colegio_profesional cols=True label=True %}
                 </div>
                 <div class="col-lg-6">
                    {% field form_datos_colegiatura.sede_colegio cols=True label=True %}
                 </div>
                 <div class="col-lg-3">
                    {% field form_datos_colegiatura.codigo_colegiado cols=True label=True %}
                 </div>
                 <div class="col-lg-3">
                    {% field form_datos_colegiatura.estado_colegiado cols=True label=True %}
                 </div>
            </div>
        </fieldset>
      </form>
      &nbsp;
      <div class="tab-content table-responsive">
        <table class="table table-bordered table-hover table-striped table-responsive"
               id="lista-persona"
               style="width: 100%;">
          <thead>
          <tr>
            <th></th>
            <th>Nro. Documento</th>
            <th>Apellidos y Nombres</th>
            <th>Celular</th>
            <th>Email</th>
            <th>Tipo persona</th>
            <th>Departamento</th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          </thead>
        </table>
      </div>
    </div>
  </div>
</div>
<div class="modal" tabindex="-1" id="modal-proyecto-pdf">
  <div class="modal-dialog modal-xl2">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Documento de proyecto de capacitación</h5>
        <button type="button" class="close" aria-label="Close" data-dismiss="modal">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <iframe style="width:100%;" height="800px" src="" id="iframe-proyecto-pdf">
        </iframe>
      </div>
    </div>
  </div>
</div>
{% endblock %}
{% block javascript %}
<script>
    var buscarPersonaUrl = "{% url 'persona:buscar-persona' %}";
    var urlListarPersona= "{% url 'persona:listar_persona' %}";
    datatablesES = "{% static 'vendor/datatables/language/spanish.json' %}";
    var urlProyectoDescargaPdf = "";
    var eliminarPersona = "{% url 'persona:eliminar_persona' 'id' %}";
    var tipPersona = "{{tipo_persona}}";
    var urlDepartamento = "{% url 'persona:consulta_departamento' %}";
    var urls_ubigeo = {
      "provincias"   : "{% url 'persona:provincias' %}",
      "distritos"    : "{% url 'persona:distritos' %}",
    };

</script>
<script src="{% static 'js/persona/persona.js' %}"></script>
{% endblock %}
