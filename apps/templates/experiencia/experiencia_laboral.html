{% extends 'base.html' %}
{% load static %}
{% load form_tags %}
{% block css %}
<link rel="stylesheet" href="{% static 'vendor/jquery/css/jquery-ui.min.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'vendor/dropzone/dropzone.min.css' %}">
{% endblock %}
{% block container %}
<div class="col-12">
  <div class="panel panel-primary">
    <div class="panel-heading">
      <h5>Experiencias
        <label class="pull-right">
          User: <label class="text-success">{{username}} {{tipo_persona_desc}}</label>
        </label>
      </h5>
    </div>
    <div class="panel-body">
      <div class="card">
        <div class="card-body">
          <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item active">
              <a class="nav-link active" id="laboral-tab" data-toggle="tab" href="#laboral" role="tab"
                 aria-controls="laboral"
                 aria-selected="true" aria-expanded="true">Laboral</a>
            </li>
            {% if tipo_persona_consultada == 'docente' %}
            <li class="nav-item">
              <a class="nav-link" id="docente-tab" data-toggle="tab" href="#docente" role="tab" aria-controls="docente"
                 aria-selected="false">Docente</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="asesor-tab" data-toggle="tab" href="#asesor" role="tab" aria-controls="asesor"
                 aria-selected="false">Asesor de Tesis</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="evaluador-proyecto-tab" data-toggle="tab" href="#evaluador-proyecto"
                 role="tab" aria-controls="evaluador-proyecto"
                 aria-selected="false">Evaluador/Formulador de proyectos</a>
            </li>
            {% endif %}
          </ul>
          <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade active in" id="laboral" role="tabpanel" aria-labelledby="laboral-tab">
              &nbsp;
              <div align="right">
                <a class="btn btn-primary m-b-sm" data-added="0" id="agrega-laboral">
                  <i class="fa fa-plus" aria-hidden="true"></i> Agregar experiencia laboral
                </a>
                <br>&nbsp;
              </div>
              <div class="table-responsive">
                <table id="tabla-laboral" class="table table-striped table-bordered display nowrap"
                       style="max-width:1000px; width:100%!important;">
                  <thead>
                  <tr>
                    <th>Institución</th>
                    <th>Cargo</th>
                    <th>Fecha Inicio</th>
                    <th>Fecha Fin</th>
                    <th>Adjunto</th>
                    <th>Editar</th>
                    <th>Eliminar</th>
                  </tr>
                  </thead>
                  <tbody>
                  </tbody>
                </table>
              </div>
            </div>
            {% if tipo_persona_consultada == 'docente' %}
            <div class="tab-pane fade" id="docente" role="tabpanel" aria-labelledby="docente-tab">
                 &nbsp;
              <div align="right">
                <a class="btn btn-primary m-b-sm" data-added="0" id="agrega-docente">
                  <i class="fa fa-plus" aria-hidden="true"></i> Agregar experiencia como Docente
                </a>
                <br>&nbsp;
              </div>
              <div class="table-responsive">
                <table id="tabla-docente" class="table table-striped table-bordered display nowrap"
                       style="max-width:1000px; width:100%!important;">
                  <thead>
                  <tr>
                    <th>Institución</th>
                    <th>Tipo Docente</th>
                    <th>Tipo Institución</th>
                    <th>Fecha Inicio</th>
                    <th>Fecha Fin</th>
                    <th>Adjunto</th>
                    <th>Editar</th>
                    <th>Eliminar</th>
                  </tr>
                  </thead>
                  <tbody>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="tab-pane fade" id="asesor" role="tabpanel" aria-labelledby="asesor-tab">
              &nbsp;
              <div align="right">
                <a class="btn btn-primary m-b-sm" data-added="0" id="agrega-asesor">
                  <i class="fa fa-plus" aria-hidden="true"></i> Agregar experiencia como Asesor de Tesis
                </a>
                <br>&nbsp;
              </div>
              <div class="table-responsive">
                <table id="tabla-asesor" class="table table-striped table-bordered display nowrap"
                       style="max-width:1000px; width:100%!important;">
                  <thead>
                  <tr>
                    <th>Universidad</th>
                    <th>Tesis</th>
                    <th>Tesista</th>
                    <th>Fecha aceptacion tesis</th>
                    <th>Repositorio</th>
                    <th>Adjuntos</th>
                    <th>Editar</th>
                    <th>Eliminar</th>
                  </tr>
                  </thead>
                  <tbody>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="tab-pane fade" id="evaluador-proyecto" role="tabpanel"
                 aria-labelledby="evaluador-proyecto-tab">
              &nbsp;
              <div align="right">
                <a class="btn btn-primary m-b-sm" data-added="0" id="agrega-evaluador-proyecto">
                  <i class="fa fa-plus" aria-hidden="true"></i> Agregar experiencia como evaluador y/o formulador de proyectos
                </a>
                <br>&nbsp;
              </div>
              <div class="table-responsive">
                <table id="tabla-evaluador-proyecto" class="table table-striped table-bordered display nowrap"
                       style="max-width:1000px; width:100%!important;">
                  <thead>
                  <tr>
                    <th>Año</th>
                    <th>Tipo de experiencia</th>
                    <th>Tipo de proyecto</th>
                    <th>Entidad financiadora</th>
                    <th>Metodología de evaluación</th>
                    <th>Monto proyecto (USD)</th>
                    <th>Adjuntos</th>
                    <th>Editar</th>
                    <th>Eliminar</th>
                  </tr>
                  </thead>
                  <tbody>
                  </tbody>
                </table>
              </div>
            </div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<input type="hidden" id="id_lab">
<input type="hidden" id="id_doc">
<input type="hidden" id="id_asesor">
<input type="hidden" id="id_evaluador">
{% include 'experiencia/partials/_modal_laboral.html' %}
{% include 'experiencia/partials/_modal_docente.html' %}
{% include 'experiencia/partials/_modal_asesor_tesis.html' %}
{% include 'experiencia/partials/_modal_evaluador_proyecto.html' %}
{% include 'experiencia/partials/_modal_adjuntar_archivos_experiencia.html' %}
{% endblock %}
{% block javascript %}
<script>
  var urlListaLaboral = "{% url 'experiencia:lista_laboral' pk %}";
  var urlListaDocente = "{% url 'experiencia:lista_docente' pk %}";
  var urlListaAsesorTesis = "{% url 'experiencia:lista_asesor_tesis' pk %}";
  var urlListaEvaluadorProyecto = "{% url 'experiencia:lista_evaluador_proyecto' pk %}";
  var urlGuardarLaboral = "{% url 'experiencia:guardar_laboral' pk %}";
  var urlGuardarDocente = "{% url 'experiencia:guardar_docente' pk %}";
  var urlGuardarAsesorTesis = "{% url 'experiencia:guardar_asesor_tesis' pk %}";
  var urlGuardarEvaluadorProyecto = "{% url 'experiencia:guardar_evaluador_proyecto' pk %}";
  var urlConsultaLaboral = "{% url 'experiencia:consulta_laboral' 'id' %}";
  var urlConsultaDocente = "{% url 'experiencia:consulta_docente' 'id' %}";
  var urlConsultaAsesorTesis = "{% url 'experiencia:consulta_asesor_tesis' 'id' %}";
  var urlConsultaEvaluadorProyecto = "{% url 'experiencia:consulta_evaluador_proyecto' 'id' %}";
  var urlSubirArchivos = "{% url 'experiencia:subir_archivos' 'id' 'tipo' %}";
  var urlListaArchivos = "{% url 'experiencia:listar_archivos' 'id' 'tipo' %}";
  var urlEliminarArchivo = "{% url 'experiencia:eliminar_archivo' 'id' 'tipo' %}";
  var personalId = "{{pk}}";
  var urlListarPersona = "{% url 'persona:listar_persona' %}";
  datatablesES = "{% static 'vendor/datatables/language/spanish.json' %}";
  var urlProyectoDescargaPdf = "";
  var eliminarPersona = "{% url 'persona:eliminar_persona' 'id' %}";
  var tipPersona = "{{tip_persona}}";
  var urlDepartamento = "{% url 'persona:consulta_departamento' %}";
  var urls_ubigeo = {
    "provincias"   : "{% url 'persona:provincias' %}",
    "distritos"    : "{% url 'persona:distritos' %}",
  };
</script>
<script src="{% static 'vendor/dropzone/dropzone.min.js' %}"></script>
<script src="{% static 'js/experiencia/experiencia.js' %}"></script>
<script src="{% static 'js/experiencia/modal-laboral.js' %}"></script>
<script src="{% static 'js/experiencia/modal-docente.js' %}"></script>
<script src="{% static 'js/experiencia/modal-asesor-tesis.js' %}"></script>
<script src="{% static 'js/experiencia/modal-evaluador-proyecto.js' %}"></script>
<script src="{% static 'js/experiencia/modal-adjuntar-archivos-experiencia.js' %}"></script>
{% endblock %}
